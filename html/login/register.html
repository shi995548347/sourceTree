<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>注册</title>
		<link rel="stylesheet" type="text/css" href="../../css/common.css"/>
		<link rel="stylesheet" type="text/css" href="../../css/register.css"/>
		<script src="../../js/jQuery/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<header>
			<div class="back">
				<img src="../../img/back.png"/>
			</div>
			<div class="con">
				注册
			</div>
		</header>
		<div id="form_con">
			<form class="form">  
		        <input class="input_common" type="text" id="phone" name="phone" placeholder="手机号" />  
		        <p>
<<<<<<< HEAD
			        <input class="input_common" type="text" id="checkCode" name="checkCode" size="6" placeholder="验证码" />  
			        <input id="btnSendCode" type="button" value="获取验证码"  onclick="sendMessage()" />  
		        </p>
		        <input class="input_common set_pwd" type="password" placeholder="设置密码" />
		        <input class="input_common reg_btn" type="button" value="注册" onclick="varrifyCode(ajaxData)" />
=======
			        <input class="input_common" type="text" id="captcha" name="checkCode" size="6" placeholder="验证码" />
			        <input id="btnSendCode" type="button" value="获取验证码"/>
		        </p>
		        <input class="input_common set_pwd" type="password" placeholder="设置密码" />
		        <input class="input_common reg_btn" type="button" id="determine" value="注册"/>
>>>>>>> 80c51d1320498c4a758e26a59a6df71d4912e940
			</form>  
		</div>
		
		<script src="../../js/rem.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/goBack.js" type="text/javascript" charset="utf-8"></script>
<<<<<<< HEAD
		<script type="text/javascript">  
			/*-------------------------------------------*/  
			var InterValObj; //timer变量，控制时间  
			var count = 60; //间隔函数，1秒执行  
			var curCount;//当前剩余秒数  
			var code = ""; //验证码  
			var codeLength = 6;//验证码长度  
			var ajaxData = "";
			
			
			
			function sendMessage() {  
			    curCount = count;  
			    
			    var phone=$("#phone").val();//手机号码  
			    if(phone != ""){  
			        //设置button效果，开始计时  
			        $("#btnSendCode").attr("disabled", "true");  
			        $("#btnSendCode").val(curCount + "S");  
			        InterValObj = window.setInterval(SetRemainTime, 1000); //启动计时器，1秒执行一次  
			    	
			    	//向后台发送处理数据  
			       	$.ajax({  
			            type: "post", //用POST方式传输  
			            dataType: "JSONP", //数据格式:JSON  
			            url: 'http://api2.shanhecang.com/sms/phone/'+phone+'/type/1', //目标地址  
			            error: function (XMLHttpRequest, textStatus, errorThrown) { },  
			            success: function (msg){ 
			            	ajaxData = msg;
			            }
			        })
			    }else{  
			        alert("手机号码不能为空！");  
			    }  
			}  
			
			function varrifyCode(msg){
				var _checkCode = $("#checkCode").val();
				var _pwd = $(".set_pwd").val;
				if(msg.data.captcha == _checkCode){
					if(_pwd !== ""){
						$.ajax({
							type:"post",
							url:"http://api2.shanhecang.com/",
							async:true
						});
					}
	            	alert("注册成功")
	            	
	            	window.location.href = "loginPhone.html"
	        	}else{
	        		alert("验证码输入错误！")
	        	}
			}
			
			//timer处理函数  
			function SetRemainTime() {  
			    if (curCount == 0) {                  
			        window.clearInterval(InterValObj);//停止计时器  
			        $("#btnSendCode").removeAttr("disabled");//启用按钮  
			        $("#btnSendCode").val("重新发送验证码");  
			        code = ""; //清除验证码。如果不清除，过时间后，输入收到的验证码依然有效      
			    }  
			    else {  
			        curCount--;  
			        $("#btnSendCode").val(curCount + "S");  
			    }  
			}  
		</script>
=======
		<script type="text/javascript" src="../../js/register.js"></script>
>>>>>>> 80c51d1320498c4a758e26a59a6df71d4912e940
	</body>
</html>
